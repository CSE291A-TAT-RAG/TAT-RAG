# ============================================
# TAT-RAG Configuration Template
# ============================================
# SETUP: cp .env.example .env
# Then edit .env to configure your environment

# ============================================
# Qdrant Vector Database
# ============================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=documents
QDRANT_TIMEOUT=60
QDRANT_DISTANCE=Cosine

# ============================================
# LLM Configuration
# ============================================
# Choose 'ollama' for local or 'bedrock' for AWS cloud
# LLM_PROVIDER=ollama
# LLM_MODEL=qwen3:8b


# LLM_PROVIDER=bedrock
# LLM_MODEL=us.amazon.titan-express-v1


LLM_PROVIDER=gemini
LLM_MODEL=gemini-2.5-flash-lite
GEMINI_API_KEY=
LLM_REQUEST_INTERVAL=8



LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=16000

# --- Ollama Configuration (Local) ---
OLLAMA_BASE_URL=http://host.docker.internal:11434

# --- AWS Bedrock Configuration (Cloud) ---
# Active when LLM_PROVIDER=bedrock
# AWS_REGION=us-west-2
# AWS_ACCESS_KEY_ID = ""
# AWS_SECRET_ACCESS_KEY = ""
# AWS_SESSION_TOKEN = ""

# ============================================
# Embedding Configuration
# ============================================
EMBEDDING_PROVIDER=local
EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DEVICE=cuda
EMBEDDING_CACHE_DIR=./models

DENSE_BATCH_SIZE=64
USE_FP16=true
SORT_BY_LENGTH=true

HYBRID_PREFETCH_LIMIT=20
HYBRID_SEARCH_ENABLED=true

# ============================================
# Bedrock Reranker (optional)
# ============================================
# Enable to re-order retrieved contexts with a Bedrock rerank model.
RERANK_ENABLED=false
RERANK_MODEL=amazon.rerank-v1:0
RERANK_TOP_N=10
RERANK_REQUEST_INTERVAL=2.0
# ============================================
# RAG Pipeline Configuration
# ============================================
# Maximum number of documents to retrieve
RAG_TOP_K=15
RAG_FINAL_CONTEXT_LIMIT=5
RAGAS_MAX_WORKERS=1
# Increase timeout (seconds) if local LLM responses are slow
# RAGAS_TIMEOUT=600
# RAGAS_MAX_RETRIES=3
# RAGAS_MAX_WAIT=30


# Minimum similarity score (0.0 - 1.0)
RAG_SCORE_THRESHOLD=0.55


### ============================================
# docker-compose down
# docker-compose up -d
# docker-compose build rag-app
